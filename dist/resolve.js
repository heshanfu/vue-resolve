'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};Object.defineProperty(exports,'__esModule',{value:!0});exports.default={install:function h(a){var b=this,c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},d=_extends({},{dataProperty:null},c),e=d.router;if(!e)throw new Error('Vue-resolve needs an instance of the router object.');var f=function(a){var c=[];for(var d in a.meta.resolve)c.push(a.meta.resolve[d].apply(b,Object.values(a.params)));return Promise.all(c)},g=function(a,b,c){for(var g in b){var e=b[g],f=c[g];d.dataProperty&&(f=f[d.dataProperty]),a[e]=f}};e.beforeEach(function(b,c,d){if(!b.meta||!b.meta.resolve)return d();f(b).then(function(c){d(),a.nextTick(function(){var a=null,d=!0,e=!1,f=void 0;try{for(var h,i,j=b.matched[Symbol.iterator]();!(d=(h=j.next()).done);d=!0)(i=h.value,i.meta===b.meta)&&(a=i.instances.default,g(a,Object.keys(b.meta.resolve),c))}catch(a){e=!0,f=a}finally{try{!d&&j.return&&j.return()}finally{if(e)throw f}}a.$options.resolved&&a.$options.resolved()})}).catch(function(a){console.error(a)})}),a.mixin({methods:{$resolve:function b(){var a=this;this.$route.meta.resolve&&f(this.$route).then(function(b){g(a,Object.keys(a.$route.meta.resolve),b)}).catch(function(a){console.error(a)})}}})}};
